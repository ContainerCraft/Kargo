#!/bin/bash

# Load environment variables into tmux session
load_env_to_tmux() {
    local env_file="$1"
    local session_name="$2"

    if [[ -f "$env_file" && -r "$env_file" ]]; then
        while IFS='=' read -r name value || [ -n "$name" ]; do
            if [ -n "$name" ]; then
                # Properly escape values
                printf -v value_esc '%q' "$value"
                tmux set-environment -t "$session_name" "$name" "$value_esc"
            fi
        done < "$env_file"
    else
        echo "Error: Environment file $env_file not found or not readable"
        exit 0
    fi
}
load_env_to_tmux ${HOME}/.env_tmux konductor
tmux attach -t konductor
